(this.webpackJsonpreactable=this.webpackJsonpreactable||[]).push([[0],{16:function(e,t,n){},20:function(e,t,n){},21:function(e,t,n){"use strict";n.r(t);var a=n(2),c=n.n(a),r=n(11),s=n.n(r),o=(n(16),n(5)),i=n.n(o),l=n(7),u=n(4),b=n(1),d=n(9),p=n(3),j=n(0);function g(e){var t=e.columns,n=e.data,a=e.fetchData,r=e.loading,s=e.pageCount,o=Object(p.useTable)({columns:t,data:n,initialState:{pageIndex:0,pageSize:10},manualPagination:!0,pageCount:s},p.useSortBy,p.useColumnOrder,p.usePagination),i=o.getTableProps,l=o.getTableBodyProps,u=o.headerGroups,g=o.prepareRow,h=o.page,m=o.canPreviousPage,O=o.canNextPage,f=o.pageOptions,x=o.pageCount,y=o.gotoPage,v=o.nextPage,C=o.visibleColumns,S=o.previousPage,k=o.setPageSize,P=o.setColumnOrder,N=o.state,_=N.pageIndex,H=N.pageSize,T=function(){P(function(e){e=Object(d.a)(e);for(var t=[];e.length;){var n=Math.floor(Math.random()*e.length);t.push(e.splice(n,1)[0])}return t}(C.map((function(e){return e.id}))))};return c.a.useEffect((function(){a({pageIndex:_,pageSize:H})}),[a,_,H]),Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("button",{type:"button",className:"btn btn-primary",onClick:function(){P(["name","ticketref","traded_on","quantity","currency","settlement_amount"])},children:"Original Column order"}),Object(j.jsx)("button",{type:"button",className:"btn btn-primary",onClick:function(){P(["name","ticketref","quantity","settlement_amount","traded_on","currency"])},children:"Change Column order"}),Object(j.jsx)("button",{type:"button",className:"btn btn-primary",onClick:function(){return T()},children:"Random Columns"}),Object(j.jsxs)("table",Object(b.a)(Object(b.a)({},i()),{},{className:"table table-bordered",children:[Object(j.jsx)("thead",{children:u.map((function(e){return Object(j.jsx)("tr",Object(b.a)(Object(b.a)({},e.getHeaderGroupProps()),{},{children:e.headers.map((function(e){return Object(j.jsxs)("th",Object(b.a)(Object(b.a)({},e.getHeaderProps(e.getSortByToggleProps())),{},{scope:"col",children:[e.render("Header"),Object(j.jsx)("span",{children:e.isSorted?e.isSortedDesc?" \ud83d\udd3d":" \ud83d\udd3c":""})]}))}))}))}))}),Object(j.jsxs)("tbody",Object(b.a)(Object(b.a)({},l()),{},{children:[h.map((function(e,t){return g(e),Object(j.jsx)("tr",Object(b.a)(Object(b.a)({},e.getRowProps()),{},{children:e.cells.map((function(e){return Object(j.jsx)("td",Object(b.a)(Object(b.a)({},e.getCellProps()),{},{children:e.render("Cell")}))}))}))})),Object(j.jsx)("tr",{children:r?Object(j.jsx)("td",{colSpan:"10000",children:"Loading..."}):Object(j.jsxs)("td",{colSpan:"10000",className:"text-center",children:["Showing ",h.length," of ~",s*H," ","results"]})})]}))]})),Object(j.jsxs)("div",{className:"pagination",children:[Object(j.jsx)("button",{type:"button",className:"btn btn-primary",onClick:function(){return y(0)},disabled:!m,children:"<<"})," ",Object(j.jsx)("button",{type:"button",className:"btn btn-primary",onClick:function(){return S()},disabled:!m,children:"<"})," ",Object(j.jsxs)("span",{children:["Page"," ",Object(j.jsxs)("strong",{children:[_+1," of ",f.length]})," "]}),Object(j.jsx)("button",{type:"button",className:"btn btn-primary",onClick:function(){return v()},disabled:!O,children:">"})," ",Object(j.jsx)("button",{type:"button",className:"btn btn-primary",onClick:function(){return y(x-1)},disabled:!O,children:">>"})," ",Object(j.jsxs)("div",{style:{display:"none"},children:[Object(j.jsxs)("span",{children:["| Go to page:"," ",Object(j.jsx)("input",{type:"number",defaultValue:_+1,onChange:function(e){var t=e.target.value?Number(e.target.value)-1:0;y(t)},style:{width:"100px"}})]}),Object(j.jsx)("select",{value:H,onChange:function(e){k(Number(e.target.value))},children:[10,20,30,40,50].map((function(e){return Object(j.jsxs)("option",{value:e,children:["Show ",e]},e)}))})]})]})]})}var h=function(){var e=c.a.useMemo((function(){return[{Header:"Name",accessor:"name"},{Header:"Ticket Ref",accessor:"ticketref"},{Header:"Trade Date",accessor:"traded_on"},{Header:"QTY",accessor:"quantity"},{Header:"CCY",accessor:"currency"},{Header:"Settlement Amount",accessor:"settlement_amount"}]}),[]),t=c.a.useState([]),n=Object(u.a)(t,2),a=n[0],r=n[1],s=c.a.useState([]),o=Object(u.a)(s,2),b=o[0],d=o[1],p=c.a.useState(!1),h=Object(u.a)(p,2),m=h[0],O=h[1],f=c.a.useState(0),x=Object(u.a)(f,2),y=x[0],v=x[1],C=c.a.useRef(0);c.a.useEffect((function(){function e(){return(e=Object(l.a)(i.a.mark((function e(){var t,n,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://canopy-frontend-task.vercel.app/api/transactions");case 2:return t=e.sent,e.next=5,t.json();case 5:n=e.sent,a=n.transactions,d(a);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}O(!0),function(){e.apply(this,arguments)}(),console.log(b),O(!1)}),[b]);var S=c.a.useCallback((function(e){var t=e.pageSize,n=e.pageIndex,a=++C.current;O(!0),setTimeout((function(){if(a===C.current){var e=t*n,c=e+t;r(b.slice(e,c)),v(Math.ceil(b.length/t)),O(!1)}}),1e3)}),[]);return Object(j.jsx)(g,{columns:e,data:a,fetchData:S,loading:m,pageCount:y})};function m(e){var t=e.columns,n=e.data,a=e.fetchData,r=e.loading,s=e.pageCount,o=Object(p.useTable)({columns:t,data:n,initialState:{pageIndex:0,pageSize:10},manualPagination:!0,pageCount:s},p.useSortBy,p.useColumnOrder,p.usePagination),i=o.getTableProps,l=o.getTableBodyProps,u=o.headerGroups,g=o.prepareRow,h=o.page,m=o.canPreviousPage,O=o.canNextPage,f=o.pageOptions,x=o.pageCount,y=o.gotoPage,v=o.nextPage,C=o.visibleColumns,S=o.previousPage,k=o.setPageSize,P=o.state,N=P.pageIndex,_=P.pageSize,H=o.setColumnOrder,T=function(){H(function(e){e=Object(d.a)(e);for(var t=[];e.length;){var n=Math.floor(Math.random()*e.length);t.push(e.splice(n,1)[0])}return t}(C.map((function(e){return e.id}))))};return c.a.useEffect((function(){a({pageIndex:N,pageSize:_})}),[a,N,_]),Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("button",{type:"button",className:"btn btn-primary",onClick:function(){H(["name","ticker","asset_class","avg_price","market_price","latest_chg_pct","market_value_ccy"])},children:"Original order Column order"}),Object(j.jsx)("button",{type:"button",className:"btn btn-primary",onClick:function(){H(["name","ticker","avg_price","market_price","latest_chg_pct","asset_class","market_value_ccy"])},children:"Important Column order"}),Object(j.jsx)("button",{type:"button",className:"btn btn-primary",onClick:function(){return T()},children:"Random Columns"}),Object(j.jsxs)("table",Object(b.a)(Object(b.a)({},i()),{},{className:"table table-bordered",children:[Object(j.jsx)("thead",{children:u.map((function(e){return Object(j.jsx)("tr",Object(b.a)(Object(b.a)({},e.getHeaderGroupProps()),{},{children:e.headers.map((function(e){return Object(j.jsxs)("th",Object(b.a)(Object(b.a)({},e.getHeaderProps(e.getSortByToggleProps())),{},{scope:"col",children:[e.render("Header"),Object(j.jsx)("span",{children:e.isSorted?e.isSortedDesc?" \ud83d\udd3d":" \ud83d\udd3c":""})]}))}))}))}))}),Object(j.jsxs)("tbody",Object(b.a)(Object(b.a)({},l()),{},{children:[h.map((function(e,t){return g(e),Object(j.jsx)("tr",Object(b.a)(Object(b.a)({},e.getRowProps()),{},{children:e.cells.map((function(e){return Object(j.jsx)("td",Object(b.a)(Object(b.a)({},e.getCellProps()),{},{children:e.render("Cell")}))}))}))})),Object(j.jsx)("tr",{children:r?Object(j.jsx)("td",{colSpan:"10000",children:"Loading..."}):Object(j.jsxs)("td",{colSpan:"10000",className:"text-center",children:["Showing ",h.length," of ~",s*_," ","results"]})})]}))]})),Object(j.jsxs)("div",{className:"pagination",children:[Object(j.jsx)("button",{type:"button",className:"btn btn-primary",onClick:function(){return y(0)},disabled:!m,children:"<<"})," ",Object(j.jsx)("button",{type:"button",className:"btn btn-primary",onClick:function(){return S()},disabled:!m,children:"<"})," ",Object(j.jsxs)("span",{children:["Page"," ",Object(j.jsxs)("strong",{children:[N+1," of ",f.length]})," "]}),Object(j.jsx)("button",{type:"button",className:"btn btn-primary",onClick:function(){return v()},disabled:!O,children:">"})," ",Object(j.jsx)("button",{type:"button",className:"btn btn-primary",onClick:function(){return y(x-1)},disabled:!O,children:">>"})," ",Object(j.jsxs)("div",{style:{display:"none"},children:[Object(j.jsxs)("span",{children:["| Go to page:"," ",Object(j.jsx)("input",{type:"number",defaultValue:N+1,onChange:function(e){var t=e.target.value?Number(e.target.value)-1:0;y(t)},style:{width:"100px"}})]}),Object(j.jsx)("select",{value:_,onChange:function(e){k(Number(e.target.value))},children:[10,20,30,40,50].map((function(e){return Object(j.jsxs)("option",{value:e,children:["Show ",e]},e)}))})]})]})]})}var O=function(){var e=c.a.useMemo((function(){return[{Header:"Name of the holding",accessor:"name"},{Header:"Ticker",accessor:"ticker"},{Header:"The asset class it belongs to",accessor:"asset_class"},{Header:"Average price",accessor:"avg_price"},{Header:"Market Price",accessor:"market_price"},{Header:"Latest change percentage",accessor:"latest_chg_pct"},{Header:"Market Value in Base CCY",accessor:"market_value_ccy"}]}),[]),t=c.a.useState([]),n=Object(u.a)(t,2),a=n[0],r=n[1],s=c.a.useState([]),o=Object(u.a)(s,2),b=o[0],d=o[1],p=c.a.useState(!1),g=Object(u.a)(p,2),h=g[0],O=g[1],f=c.a.useState(0),x=Object(u.a)(f,2),y=x[0],v=x[1],C=c.a.useRef(0);c.a.useEffect((function(){function e(){return(e=Object(l.a)(i.a.mark((function e(){var t,n,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://canopy-frontend-task.vercel.app/api/holdings");case 2:return t=e.sent,e.next=5,t.json();case 5:n=e.sent,a=n.payload,d(a);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}O(!0),function(){e.apply(this,arguments)}(),console.log(b),O(!1)}),[b]);var S=c.a.useCallback((function(e){var t=e.pageSize,n=e.pageIndex,a=++C.current;O(!0),setTimeout((function(){if(a===C.current){var e=t*n,c=e+t;r(b.slice(e,c)),v(Math.ceil(b.length/t)),O(!1)}}),1e3)}),[]);return Object(j.jsx)(m,{columns:e,data:a,fetchData:S,loading:h,pageCount:y})};n(20);function f(){return Object(j.jsxs)("div",{className:"app",children:[Object(j.jsxs)("div",{className:"app__table",children:[Object(j.jsx)("h1",{children:"Transactions"}),Object(j.jsx)(h,{})]}),Object(j.jsxs)("div",{className:"app__table",children:[Object(j.jsx)("h1",{children:"Holding"}),Object(j.jsx)(O,{})]})]})}var x=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,22)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,r=t.getLCP,s=t.getTTFB;n(e),a(e),c(e),r(e),s(e)}))};s.a.render(Object(j.jsx)(c.a.StrictMode,{children:Object(j.jsx)(f,{})}),document.getElementById("root")),x()}},[[21,1,2]]]);
//# sourceMappingURL=main.19de0522.chunk.js.map